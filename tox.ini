[tox]
envlist = py{310,311,312}

[testenv]
setenv =
    PYTHONWARNINGS = d
allowlist_externals = poetry
commands_pre =
    poetry install --no-root --sync
commands =
    flake8 requests_unixsocket/ examples/
    mypy requests_unixsocket/ examples/
    coverage erase
    coverage run -m pytest {posargs:requests_unixsocket/tests}
    coverage report --show-missing
